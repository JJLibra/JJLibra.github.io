const CountdownTimer=(()=>{const n={targetDate:"2025-01-29",targetName:"春节",units:{day:{text:"今日",divider:1,unit:"小时"},week:{text:"本周",divider:24,unit:"天"},month:{text:"本月",divider:24,unit:"天"},year:{text:"本年",divider:24,unit:"天"}}};function t(t){const e=new Date,a=new Date(e.setHours(0,0,0,0)),i=new Date(e.setHours(23,59,59,999));if("day"===t){const e=(new Date).getHours(),a=24-e,i=e/24*100;return{name:n.units[t].text,remaining:a,percentage:i.toFixed(2),unit:n.units[t].unit}}const o={week:()=>{a.setDate(a.getDate()-a.getDay()),i.setDate(i.getDate()-i.getDay()+6)},month:()=>{a.setDate(1),i.setMonth(i.getMonth()+1,0)},year:()=>{a.setMonth(0,1),i.setMonth(11,31)}};o[t]?.();const r="day"===t?24:Math.floor((i-a)/864e5)+1,c=Math.floor((e-a)/(36e5*n.units[t].divider)),s=c/r*100;return{name:n.units[t].text,remaining:r-c,percentage:s.toFixed(2),unit:n.units[t].unit}}function e(){const e=["eventName","eventDate","daysUntil","countRight"].map((n=>document.getElementById(n)));if(e.some((n=>!n)))return;const[a,i,o,r]=e,c=Object.keys(n.units).reduce(((n,e)=>({...n,[e]:t(e)})),{}),s=Math.round((new Date(n.targetDate)-(new Date).setHours(0,0,0,0))/864e5);a.textContent=n.targetName,i.textContent=n.targetDate,o.textContent=s,r.innerHTML=Object.entries(c).map((([n,t])=>`\n                <div class="cd-count-item">\n                    <div class="cd-item-name">${t.name}</div>\n                    <div class="cd-item-progress">\n                        <div class="cd-progress-bar" style="width: ${t.percentage}%; opacity: ${t.percentage/100}"></div>\n                        <span class="cd-percentage ${t.percentage>=46?"cd-many":""}">${t.percentage}%</span>\n                        <span class="cd-remaining ${t.percentage>=60?"cd-many":""}">\n                            <span class="cd-tip">还剩</span>${t.remaining}<span class="cd-tip">${t.unit}</span>\n                        </span>\n                    </div>\n                </div>\n            `)).join("")}let a;const i=()=>{!function(){const n=document.createElement("style");n.textContent='\n            .card-countdown .item-content {\n                display: flex;\n            }\n            .cd-count-left {\n                position: relative;\n                display: flex;\n                flex-direction: column;\n                margin-right: 0.8rem;\n                line-height: 1.5;\n                align-items: center;\n                justify-content: center;\n            }\n            .cd-count-left .cd-text {\n                font-size: 14px;\n            }\n            .cd-count-left .cd-name {\n                font-weight: bold;\n                font-size: 18px;\n            }\n            .cd-count-left .cd-time {\n                font-size: 30px;\n                font-weight: bold;\n                color: var(--anzhiyu-main);\n            }\n            .cd-count-left .cd-date {\n                font-size: 12px;\n                opacity: 0.6;\n            }\n            .cd-count-left::after {\n                content: "";\n                position: absolute;\n                right: -0.8rem;\n                width: 2px;\n                height: 80%;\n                background-color: var(--anzhiyu-main);\n                opacity: 0.5;\n            }\n            .cd-count-right {\n                flex: 1;\n                margin-left: .8rem;\n                display: flex;\n                flex-direction: column;\n                justify-content: space-between;\n            }\n            .cd-count-item {\n                display: flex;\n                flex-direction: row;\n                align-items: center;\n                height: 24px;\n            }\n            .cd-item-name {\n                font-size: 14px;\n                margin-right: 0.8rem;\n                white-space: nowrap;\n            }\n            .cd-item-progress {\n                position: relative;\n                display: flex;\n                flex-direction: row;\n                align-items: center;\n                justify-content: space-between;\n                height: 100%;\n                width: 100%;\n                border-radius: 8px;\n                background-color: var(--anzhiyu-background);\n                overflow: hidden;\n            }\n            .cd-progress-bar {\n                height: 100%;\n                border-radius: 8px;\n                background-color: var(--anzhiyu-main);\n            }\n            .cd-percentage,\n            .cd-remaining {\n                position: absolute;\n                font-size: 12px;\n                margin: 0 6px;\n                transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;\n            }\n            .cd-many {\n                color: #fff;\n            }\n            .cd-remaining {\n                opacity: 0;\n                transform: translateX(10px);\n            }\n            .card-countdown .item-content:hover .cd-remaining {\n                transform: translateX(0);\n                opacity: 1;\n            }\n            .card-countdown .item-content:hover .cd-percentage {\n                transform: translateX(-10px);\n                opacity: 0;\n            }\n        ',document.head.appendChild(n)}(),e(),a=setInterval(e,6e5)};return["pjax:complete","DOMContentLoaded"].forEach((n=>document.addEventListener(n,i))),document.addEventListener("pjax:send",(()=>a&&clearInterval(a))),{start:i,stop:()=>a&&clearInterval(a)}})();