<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><div class="note orange anzhiyufont anzhiyu-icon-dengpao simple"><p>建议大家使用CDN之前，一定要认真研究学习一下CDN。<strong>千万不要轻易使用CDN，以免带来不必要的损失</strong></p>
</div>

<p>CDN在一般情况下能给网站加速，但如果使用不当，不仅不能实现访问加速，还有可能被黑客利用。因为CDN服务一般是按量计费的，相信大家都听过一些博主的网站被恶意刷流量，然后损失几百甚至上万的。尽管我的网站访问量不多，也应该做好应对恶意刷流量的措施，毕竟存在这个问题，那就需要解决。</p>
<h2 id="使用一般CDN后的效果"><a href="#使用一般CDN后的效果" class="headerlink" title="使用一般CDN后的效果"></a>使用一般CDN后的效果</h2><div class="note orange anzhiyufont anzhiyu-icon-dengpao simple"><p>为什么说是一般CDN？因为还有一类是高防CDN，顾名思义，它具有更好的防御服务提供，下文会有具体介绍。</p>
</div>

<ul>
<li>网站在配备CDN前后的访问速度（我使用的是<a href="https://www.upyun.com/">又拍云</a>CDN服务）</li>
</ul>
<p>我使用免费的测速网站进行测试，为了测试数据更具参考价值，我使用了多个平台进行测试。</p>
<h3 id="使用CDN前后对比"><a href="#使用CDN前后对比" class="headerlink" title="使用CDN前后对比"></a>使用CDN前后对比</h3><ul>
<li><a href="https://www.itdog.cn/">itdog</a></li>
</ul>
<ol>
<li>网站测速（HTTP）</li>
</ol>
<div class="gallery">
  <div class="fj-gallery page_img_lazyload  data" data-rowHeight="300" data-limit="2">
    <span class="gallery-data">[{"url":"https://www.freeimg.cn/i/2024/01/07/659a6872b9e36.png","alt":""},{"url":"https://www.freeimg.cn/i/2024/01/07/659a68812f08b.png","alt":""}]</span>
  </div><button class="gallery-load-more" style="opacity:0">
  <span>加载更多</span>
  <i class="anzhiyufont anzhiyu-icon-arrow-down"></i>
  </button></div>

<ol start="2">
<li>异地Ping</li>
</ol>
<div class="gallery">
  <div class="fj-gallery page_img_lazyload  data" data-rowHeight="300" data-limit="2">
    <span class="gallery-data">[{"url":"https://www.freeimg.cn/i/2024/01/07/659a6839e6941.png","alt":""},{"url":"https://www.freeimg.cn/i/2024/01/07/659a684b2f6e2.png","alt":""}]</span>
  </div><button class="gallery-load-more" style="opacity:0">
  <span>加载更多</span>
  <i class="anzhiyufont anzhiyu-icon-arrow-down"></i>
  </button></div>

<ul>
<li><a href="https://zhale.me/">zhale</a></li>
</ul>
<ol>
<li>网站测速（HTTP）</li>
</ol>
<div class="gallery">
  <div class="fj-gallery page_img_lazyload  data" data-rowHeight="300" data-limit="2">
    <span class="gallery-data">[{"url":"https://www.freeimg.cn/i/2024/01/07/659a6a0b4934e.png","alt":""},{"url":"https://www.freeimg.cn/i/2024/01/07/659a6a1d127ed.png","alt":""}]</span>
  </div><button class="gallery-load-more" style="opacity:0">
  <span>加载更多</span>
  <i class="anzhiyufont anzhiyu-icon-arrow-down"></i>
  </button></div>

<ol start="2">
<li>异地Ping</li>
</ol>
<div class="gallery">
  <div class="fj-gallery page_img_lazyload  data" data-rowHeight="300" data-limit="2">
    <span class="gallery-data">[{"url":"https://www.freeimg.cn/i/2024/01/07/659a6a51799e8.png","alt":""},{"url":"https://www.freeimg.cn/i/2024/01/07/659a6a6780381.png","alt":""}]</span>
  </div><button class="gallery-load-more" style="opacity:0">
  <span>加载更多</span>
  <i class="anzhiyufont anzhiyu-icon-arrow-down"></i>
  </button></div>

<ul>
<li><a href="https://ping.chinaz.com/">站长之家</a>异地Ping</li>
</ul>
<div class="gallery">
  <div class="fj-gallery page_img_lazyload  data" data-rowHeight="300" data-limit="2">
    <span class="gallery-data">[{"url":"https://www.freeimg.cn/i/2024/01/07/659a6a82213b0.png","alt":""},{"url":"https://www.freeimg.cn/i/2024/01/07/659a6a93219c9.png","alt":""}]</span>
  </div><button class="gallery-load-more" style="opacity:0">
  <span>加载更多</span>
  <i class="anzhiyufont anzhiyu-icon-arrow-down"></i>
  </button></div>

<p><strong>上面的这些测试指标仅作为参考，不能直接代表网站访问速度</strong></p>
<p>从这些数据可以看出CDN能够实现网站的加速访问，CDN另一个作用：隐藏源站IP</p>
<ul>
<li>源站IP隐藏</li>
</ul>
<p>上面的数据里还包含了响应IP：</p>
<ul>
<li>使用CDN前，源站IP直接暴露：185.199.111.153；</li>
<li>使用CDN后出现了四个不同IP：<br>61.139.65.250、112.3.31.155、218.25.106.79、61.240.153.194（不包含185.199.111.153）</li>
</ul>
<p>185.199.111.153即为源站IP，也就是仓库所在IP地址，说明CDN确实能够一定程度地隐藏源站IP。</p>
<h2 id="可能的攻击方式"><a href="#可能的攻击方式" class="headerlink" title="可能的攻击方式"></a>可能的攻击方式</h2><p>下面介绍的这些攻击，实现逻辑是比较简单的，可能一个小白（比如我）就能实现攻击。但是这种逻辑简单的攻击却非常有效，还很难处理。即使通过一些安全策略防住了这些攻击，攻击还很容易进化，通过事先信息搜集，分析…以后，一种比较针对性的“变种”就出现了。因此，这篇文章只是记录基于我的使用情况设置的一些安全策略，并不能应用于所有的场景中，大家需要结合自己的使用状况进行调整。</p>
<h3 id="绕过CDN获取源站IP"><a href="#绕过CDN获取源站IP" class="headerlink" title="绕过CDN获取源站IP"></a>绕过CDN获取源站IP</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="https://www.freeimg.cn/i/2023/12/26/658a8a208cbe9.jpg" alt="等待更新......" style="width:360px;"/></div><span class="image-caption">等待更新......</span></div>

<h3 id="CC攻击"><a href="#CC攻击" class="headerlink" title="CC攻击"></a>CC攻击</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="https://www.freeimg.cn/i/2023/12/26/658a8a208cbe9.jpg" alt="等待更新......" style="width:360px;"/></div><span class="image-caption">等待更新......</span></div>

<h3 id="DDos攻击"><a href="#DDos攻击" class="headerlink" title="DDos攻击"></a>DDos攻击</h3><div class="img-wrap"><div class="img-bg"><img class="img" src="https://www.freeimg.cn/i/2023/12/26/658a8a208cbe9.jpg" alt="等待更新......" style="width:360px;"/></div><span class="image-caption">等待更新......</span></div>

<h2 id="针对性防御措施"><a href="#针对性防御措施" class="headerlink" title="针对性防御措施"></a>针对性防御措施</h2><p>（防盗链、IP限频和访问控制…）</p>
<div class="img-wrap"><div class="img-bg"><img class="img" src="https://www.freeimg.cn/i/2023/12/26/658a8a208cbe9.jpg" alt="等待更新......" style="width:360px;"/></div><span class="image-caption">等待更新......</span></div>


